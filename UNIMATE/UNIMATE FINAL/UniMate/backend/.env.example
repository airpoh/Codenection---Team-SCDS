# ============================================================================
# UniMate Backend Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!

# ============================================================================
# BLOCKCHAIN CONFIGURATION
# ============================================================================

# Polygon Amoy RPC URL
AMOY_RPC_URL=https://rpc-amoy.polygon.technology/

# Deployed Smart Contract Addresses (Polygon Amoy Testnet)
WELL_ADDRESS=0x2aabe1c44a3122776f84c22eb3e9ebcb881c2651
REDEMPTION_SYSTEM_ADDRESS=0x06cd3f30bbd1765415ee5b3c84d34c5eaadca635
ACHIEVEMENTS_ADDRESS=0xe3cd50cd801adce2b50f0e3d707f6d02876e7a92

# Legacy contract addresses (kept for backwards compatibility)
ACH_ADDRESS=0xe3cd50cd801adce2b50f0e3d707f6d02876e7a92
RS_ADDRESS=0x06cd3f30bbd1765415ee5b3c84d34c5eaadca635

# ============================================================================
# PRIVATE KEYS (SENSITIVE - Keep secure!)
# ============================================================================

# Backend private key for blockchain operations
PRIVATE_KEY=your_private_key_here

# Owner/Admin private key (for privileged operations)
OWNER_PRIVATE_KEY=your_owner_private_key_here

# Backend signer private key (for EIP-712 signatures)
SIGNER_PRIVATE_KEY=0xyour_signer_private_key_here

# Minter wallet address
MINTER_ADDRESS=0xYourMinterAddressHere

# Demo/Test user credentials (for development only)
DEMO_USER_PRIVATE_KEY=0xyour_demo_private_key_here
DEMO_USER_ADDRESS=0xYourDemoUserAddressHere
TEST_PRIVATE_KEY=0xyour_test_private_key_here

# ============================================================================
# BICONOMY CONFIGURATION (ERC-4337 Account Abstraction)
# ============================================================================

# Biconomy Bundler URL (Polygon Amoy - Chain ID 80002)
BICONOMY_BUNDLER_URL=https://bundler.biconomy.io/api/v2/80002/bundler_YOUR_BUNDLER_KEY

# Biconomy Paymaster API Key (for gasless transactions)
BICONOMY_PAYMASTER_API_KEY=YourPaymasterApiKey.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Biconomy Paymaster URL
BICONOMY_PAYMASTER_URL=https://paymaster.biconomy.io/api/v1/80002/YourPaymasterApiKey.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Biconomy Paymaster ID
BICONOMY_PAYMASTER_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Chain ID (Polygon Amoy Testnet)
CHAIN_ID=80002

# Token addresses (for ERC-4337 operations)
WELL_TOKEN_ADDRESS=0x2aabe1c44a3122776f84c22eb3e9ebcb881c2651
REDEMPTION_ADDRESS=0x06cd3f30bbd1765415ee5b3c84d34c5eaadca635

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================

# Supabase Project URL
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase Anonymous Key (public, safe for frontend)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your_anon_key_here

# Supabase Service Role Key (SENSITIVE - backend only!)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your_service_role_key_here

# Supabase JWT Secret (for token verification)
SUPABASE_JWT_SECRET=your_jwt_secret_here

# Supabase Project Reference (subdomain from URL)
SUPABASE_PROJECT_REF=your-project-ref

# Supabase Database Connection String
SUPABASE_DB_URL=postgresql://postgres.your-project-ref:your-password@aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres

# Legacy database URL (if needed)
DATABASE_URL=postgresql://postgres.your-project-ref:your-password@aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# Email domain validation (e.g., .edu.my for university emails)
ALLOWED_EMAIL_DOMAIN=.edu.my

# Frontend password reset URL (deep link for mobile app)
FRONTEND_RESET_URL=unimate://reset-password

# API JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_AUDIENCE=unimate-api
JWT_ISSUER=unimate
JWT_EXPIRE_MINUTES=60

# API Secret for HMAC signing
API_SECRET=your-api-secret-change-this-in-production

# Private key encryption password (for storing user keys)
PRIVATE_KEY_ENCRYPTION_PASSWORD=your-encryption-password-change-in-production

# ============================================================================
# EMAIL CONFIGURATION (Resend)
# ============================================================================

# Resend API Key (for sending emails)
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# From email address
FROM_EMAIL=noreply@unimate.edu.my

# From name
FROM_NAME=UniMate

# ============================================================================
# PARTICLE NETWORK (Legacy - May be deprecated)
# ============================================================================

PARTICLE_PROJECT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
PARTICLE_CLIENT_KEY=your_particle_client_key
PARTICLE_APP_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
PARTICLE_SERVER_KEY=your_particle_server_key

# ============================================================================
# SECURITY FEATURES (OPTIONAL)
# ============================================================================

# Environment (development, staging, production)
ENV=development

# HashiCorp Vault Integration (Optional)
USE_VAULT=false
VAULT_ADDR=http://127.0.0.1:8200
VAULT_ROLE_ID=your_vault_role_id
VAULT_SECRET_ID=your_vault_secret_id
VAULT_NAMESPACE=

# Redis Cache (Optional)
USE_REDIS=false
REDIS_HOST=localhost
REDIS_PORT=6379

# ============================================================================
# OPENZEPPELIN DEFENDER (DISABLED - Service discontinued)
# ============================================================================

DEFENDER_ENABLED=false
DEFENDER_API_KEY=
DEFENDER_API_SECRET=
DEFENDER_API_URL=https://api.defender.openzeppelin.com

# ============================================================================
# BLOCKCHAIN OPERATION LIMITS
# ============================================================================

# Maximum tokens per mint operation
MAX_PER_MINT=10

# Rate limit per minute for blockchain operations
RATE_LIMIT_PER_MIN=5

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed origins (comma-separated, use * for development only)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:19006,http://192.168.1.39:8000
